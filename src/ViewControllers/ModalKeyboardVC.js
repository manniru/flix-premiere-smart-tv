(function(){"use strict";var base=ViewControllerManager.findClass("ViewControllerNav");ViewControllerManager.newClassDef("ModalKeyboardVC",Class.create({_extends_:base,_init_:function(args){base.call(this,args);this.activeChild='btnSignIn';this.navigation={btnSignIn:{Down:'btnRegister'},btnRegister:{Up:'btnSignIn'}};},onLoad:function(){$('#backIcon').css("z-index",2);},onUnload:function(){$('#backIcon').css("z-index",0);$('#backIcon').css('background-image','url(css/assets/backarrow.png');},render:function(location){this._super(location);this.activeChild='btnSignIn';this.enable();var Keyboard=ViewControllerManager.find('Keyboard');var Home=this;if(Model.App.profileState==='signIn'){var SignInHandler=ViewControllerManager.find('SignInHandler');Home.addChild(Keyboard,'#ModalKeyboard');Home.activeChild=Keyboard;Keyboard.extraInfoController='SignInHandler';Keyboard.addChild(SignInHandler,'#ExtraInfo');}else if(Model.App.profileState==='register'){var RegisterHandler=ViewControllerManager.find('RegisterHandler');Home.addChild(Keyboard,'#ModalKeyboard');Home.activeChild=Keyboard;Keyboard.extraInfoController='RegisterHandler';Keyboard.addChild(RegisterHandler,'#ExtraInfo');}else if(Model.App.profileState==='addCC'){var CreditCardHandler=ViewControllerManager.find('CreditCardHandler');Home.addChild(Keyboard,'#ModalKeyboard');Home.activeChild='Keyboard';Keyboard.extraInfoController='CreditCardHandler';Keyboard.addChild(CreditCardHandler,'#ExtraInfo');}},onKeyDown:function(e,keyCode){TVA.log('keydown in '+this.name);if(Model.App.listen){switch(keyCode){case Keys.getBind("Circle"):case Keys.getBind("Back"):this.onClose();e.stopPropagation();break;case Keys.getBind("Exit"):e.stopPropagation();break;case Keys.getBind("Up"):this._navigate("Up",e);e.stopPropagation();break;case Keys.getBind("Down"):this._navigate("Down",e);e.stopPropagation();break;case Keys.getBind("Left"):this._navigate("Left",e);e.stopPropagation();break;case Keys.getBind("Right"):this._navigate("Right",e);e.stopPropagation();break;case Keys.getBind("Cross"):case Keys.getBind("Enter"):$('#'+TVA.onFocus).click();break;}}},_navigate:function(direction,e){var nextChild=this.navigation[this.activeChild][direction];if(nextChild&&this.children[nextChild]){this.children[nextChild].view.enable();e.stopPropagation();}else if($(this.rootID).find('#'+nextChild).length){TVA.setFocus(nextChild);this.activeChild=nextChild;e.stopPropagation();}},onClose:function(call){var home=ViewControllerManager.find('Home');$(this.rootID+' .active').removeClass('active');var scope=this;if(Model.App.fromProfile){this.parentVC.backToPrevious();ViewControllerManager.find('Profile').setup();call&&call();}else if(Model.App.fromMyMovies){Model.App.loginFromMyMovies=true;var screen=ViewControllerManager.find('Screen');screen.getMyMovies(function(){scope.parentVC.backToPrevious();screen.createMyMoviesList();home._enableElement('Screen');if(Model.myMovies&&(Model.myMovies.films.active_films.length===0||Model.myMovies.films.past_films.length===0||Model.myMovies.films.reminders.length===0)){home.showSideMenu();}
Util.hideSpriteLoader();call&&call();},function(){});}else{this.parentVC.backToPrevious();if(home.activeChild==='Details'){home.children[home.activeChild].view.enable();home.children[home.activeChild].view.rebuildView();}
call&&call();}},onMouseLeave:function(e){$('#'+e.target.id).removeClass('active');},onBackHover:function(e){$('#'+e.target.id).addClass('active');},onHover:function(e){},btnClick:function(e){}}));})();