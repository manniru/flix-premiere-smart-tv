(function(){"use strict";var base=ViewControllerManager.findClass("ViewControllerNav");ViewControllerManager.newClassDef("HomeVC",Class.create({_extends_:base,_init_:function(args){base.call(this,args);this.activeChild='mainMenu';this.navigation={mainMenu:{Right:'categoriesList'},categoriesList:{Left:'mainMenu'},NowShowing:{Left:'mainMenu'}};this.categoryIndex=0;this.showScreenTimeoutId=null;this.updateHome=false;this.showingSideMenuTimeout=null;},onLoad:function(){},render:function(location){this._super(location);this.enable();var scope=this;Model.App.premiereShowing=false;Model.App.promptReview=false;Model.App.premiereBoards={home:[],screen:[]};API.getHomeFilms(function(res){Model.App.featuredBanners=res.featured_banners[0];scope.createCarouselsList();scope.createMainMenu();scope.compileAllMovies();Model.App.showingSideMenu=false;Model.App.fromMyMovies=false;Model.App.fromProfile=false;Model.App.fromDetails=false;Model.App.profileState="screen";scope.hideMenuTimeout=setTimeout(function(){scope.hideSideMenu();scope.children['categoriesList'].view.enable();if(scope.children[scope.activeChild].view.activeChild==='home_featured'){$('#featuredCounter').addClass('active');}else{$('#featuredCounter').removeClass('active');}},3000);if(TVA.device==='lg'||TVA.device==='webos'){$('#screens').css({'background-image':'url("./css/assets/background.png")'});$('.movieTitleContainer').css({'color':'rgba(255, 255, 255,0.75)'});}
$('#mainMenu').css({width:'50px'});ViewControllerManager.find('Root').hideSplash();},function(res,errorCode){Model.App.errorCode=errorCode;home.publish('Error');});},onKeyDown:function(e,keyCode){TVA.log('keydown in Home');var focus=$('#'+TVA.onFocus);if(Model.App.listen){switch(keyCode){case Keys.getBind("Circle"):case Keys.getBind("Back"):e.stopPropagation();this.back();break;case Keys.getBind("Up"):break;case Keys.getBind("Down"):e.stopPropagation();break;case Keys.getBind("Left"):var isMenuOpen=!$('#container').hasClass('offScreen');if(isMenuOpen){TVA.log("Left being ignored...");e.stopPropagation();return;}else{this._navigate("Left",e,keyCode);e.stopPropagation();}
break;case Keys.getBind("Right"):this._navigate("Right",e,keyCode);e.stopPropagation();break;case Keys.getBind("Cross"):focus.click();e.stopImmediatePropagation();break;case Keys.getBind("Enter"):focus.click();e.stopImmediatePropagation();break;}}},_navigate:function(direction,e){var nextChild=this.navigation[this.activeChild][direction];if(nextChild&&this.children[nextChild]){if(this.activeChild==='mainMenu'){Model.App.showingSideMenu=false;this.goto(nextChild);}else if(this.activeChild==='categoriesList'){this.showSideMenu();$('.gridElement.active').removeClass('active');this.children[nextChild].view.enable();}
e.stopPropagation();}else if($(this.rootID).find('#'+nextChild).length){TVA.setFocus(nextChild);this.activeChild=nextChild;e.stopPropagation();}},onMouseLeave:function(){$('#backIcon').removeClass('active');},onHover:function(event){var element=event.target.id;if(element==='backIcon'){$('#'+element).addClass('active');}else{this._enableElement(element);}
event.stopPropagation();},createMainMenu:function(carouselData){var menuItems=language[Model.App.file.language].menu;carouselData=[{title:menuItems.home,icon:'ic_home.png'},{title:menuItems.my_movies,icon:'ic_mymovies.png'},{title:menuItems.now_showing,icon:'ic_nowshowing.png'},{title:menuItems.red_carpet,icon:'ic_redcarpet.png'},{title:menuItems.upcoming,icon:'ic_comingsoon.png'},{title:menuItems.all_films,icon:'ic_allmovies.png'},{title:menuItems.profile,icon:'ic_profile.png'},{title:menuItems.exit,icon:'ic_exit.png'}];var callBacks={clickCB:this.mainMenuClick,keydownCB:this.mainMenuKeydown,hoverCB:this.mainMenuHover,mouseOutCB:this.mainMenuMouseOut};var params={carouselData:carouselData};WidgetManager.addWidget(this,'mainMenu','#sideMenu',callBacks,params);},mainMenuClick:function(e){if(!Model.App.showingSideMenu){var menuItems=language[Model.App.file.language].menu;var home=ViewControllerManager.find('Home');var root=ViewControllerManager.find('Root');clearTimeout(home.showScreenTimeoutId);var menuItemText='';var pos=this.pos;if(!Model.App.loggedIn){if(this.name==='home_featured'){if(this.pos===0){menuItemText='promo';}
pos=this.pos-1;}else{menuItemText=e.currentTarget.parentElement.parentElement.textContent.trim();}}else{menuItemText=e.currentTarget.parentElement.parentElement.textContent.trim();}
switch(menuItemText){case menuItems.home:home.showHome();home.goto('categoriesList');break;case menuItems.now_showing:case menuItems.upcoming:case menuItems.my_movies:case menuItems.red_carpet:case menuItems.all_films:home.goto('Screen');break;case menuItems.profile:$('#Screen').hide();home.goto('Profile');Util.hideSpriteLoader();break;case menuItems.search:home.showScreen('Keyboard');home.goto('Keyboard');$('#Screen').hide();Util.hideSpriteLoader();break;case menuItems.exit:root.exitApp();break;case'promo':Model.App.keyboardReturnTo='featured';var profile=ViewControllerManager.find('Profile');Model.App.fromMyMovies=false;profile.showRegister();break;default:var name=this.name.replace('home_','');var id='';if(config.useCMS){for(var i=0;i<Model.Movies.films.length;i++){if(Model.Movies.films[i].title===name){id=Model.Movies.films[i].movies[pos].id;break;}}}else{id=Model.Movies.films[name][pos].id;}
API.getMovie(id,function(data){Model.App.returnFromDetailsTo={parent:'categories',screen:'categoriesList'};Model.App.movie=data;home.handleRequiredPin();},function(res,errorCode){Model.App.errorCode=errorCode;home.publish('Error');});break;}}
e.stopPropagation();},handleRequiredPin:function(){var self=this;var user=Model.App.file.user;Util.showSpriteLoader();if(Model.App.loggedIn){if(user.parental_control){if(user.parental_control.is_active&&Model.App.showPinBeforeDetails){if(user.parental_control.restriction!=='R'){API.pinRequiredToWatch(Model.App.movie.flix_id,function(res){Util.hideSpriteLoader();if(res.status===true){Model.App.pinState='insert';Model.App.watchFromPin=true;self.publish('PinInsert');}else{self.goToDetails();}},function(res,errorCode){Model.App.errorCode=errorCode;self.publish('Error');});}else{self.goToDetails();}}else{self.goToDetails();}}else{self.goToDetails();}}else{self.goToDetails();}},goToDetails:function(){Util.showSpriteLoader();var home=ViewControllerManager.find('Home');var vc=ViewControllerManager.find("Details");$('#Screen').hide();home.addChild(vc,'#screens');},mainMenuKeydown:function(e,keycode){var home=ViewControllerManager.find('Home');var scope=this;var delayNavigation=null;if(home.activeChild==="mainMenu"){if(settings.device==='panasonic'&&(keycode===Keys.getBind("Up")||keycode===Keys.getBind("Down"))){delayNavigation=true;}}
Util.showSpriteLoader();if(delayNavigation){setTimeout(function(){home.onMainMenuNavigation(e,keycode,scope);Util.hideSpriteLoader();},1000);}else{home.onMainMenuNavigation(e,keycode,scope);Util.hideSpriteLoader();}},onMainMenuNavigation:function(e,keycode,scope){$('#backIcon').removeClass('active');var menuItems=language[Model.App.file.language].menu;var home=ViewControllerManager.find('Home');clearTimeout(home.hideMenuTimeout);clearTimeout(home.showScreenTimeoutId);var txt=$('#'+scope.activeChild.replace('_Overlay',''))[0].textContent.trim();var screen='';var targetScreen='Screen';switch(txt){case menuItems.home:home.showHome();targetScreen='categoriesList';break;case menuItems.now_showing:screen='NowShowing';targetScreen='Screen';scope.updateHome=true;break;case menuItems.upcoming:screen='ComingSoon';targetScreen='Screen';scope.updateHome=true;targetScreen='Screen';break;case menuItems.my_movies:screen='MyMovies';scope.updateHome=true;targetScreen='Screen';break;case menuItems.red_carpet:screen='RedCarpet';scope.updateHome=true;targetScreen='Screen';break;case menuItems.all_films:screen='AllMovies';scope.updateHome=true;targetScreen='Screen';break;case menuItems.profile:scope.updateHome=true;home.showProfile();if(settings.device==='ps3'||settings.device==='ps4'){if(keycode!==Keys.getBind("Cross")){home.children['mainMenu'].view.enable();}}else if(keycode!==Keys.getBind("Enter")){home.children['mainMenu'].view.enable();}
targetScreen='Profile';break;case menuItems.search:home.showSearch();if(keycode!==Keys.getBind("Enter")){home.children['mainMenu'].view.enable();}
Util.hideSpriteLoader();break;default:Util.hideSpriteLoader();break;}
if(settings.device==='ps3'||settings.device==='ps4'){if(keycode!==Keys.getBind("Cross")&&screen!==''){home.showScreen(screen);home.children['mainMenu'].view.enable();}else if(keycode===Keys.getBind("Cross")&&home.children.categoriesList.view.activeChild==='home_featured'){scope.activateFeatured=true;}}else if(keycode!==Keys.getBind("Enter")&&screen!==''){if(keycode!==Keys.getBind("Right")){home.showScreen(screen);}else{Util.hideSpriteLoader();home.goto(targetScreen);}
home.children['mainMenu'].view.enable();}else if(keycode===Keys.getBind("Enter")&&home.children.categoriesList.view.activeChild==='home_featured'){scope.activateFeatured=true;}
var nav=home.children.categoriesList.view.navigation[scope.name];if((keycode===Keys.getBind("Up")&&nav&&nav.Up==='home_featured')||scope.activateFeatured){scope.activateFeatured=false;$('#featuredCounter').addClass('active');}else if(scope.name!=='home_featured'||keycode===Keys.getBind("Down")){$('#featuredCounter').removeClass('active');}
if(scope.name==='home_featured'){if(keycode===Keys.getBind("Left")&&scope.pos===0){}
$('#featuredCounter .featuredCounterBlock').removeClass('active');$('#featuredCounter .featuredCounterBlock:nth-child('+(scope.pos+1)+')').addClass('active');}},mainMenuHover:function(e){var menuItems=language[Model.App.file.language].menu;var home=ViewControllerManager.find('Home');var id=$(e.currentTarget).parents($(this))[5].id;if(id!=='home_featured'&&id!=='mainMenu'&&id!=='home_red_carpet'){home.hideSideMenu();}else if(id==='mainMenu'){home.showSideMenu(0);var category=e.currentTarget.parentElement.innerText.replace('\n','');clearTimeout(home.hideMenuTimeout);clearTimeout(home.showScreenTimeoutId);switch(category){case menuItems.home:home.showHome();break;case menuItems.now_showing:home.showScreen('NowShowing');home.children['mainMenu'].view.enable();break;case menuItems.upcoming:home.showScreen('ComingSoon');home.children['mainMenu'].view.enable();break;case menuItems.my_movies:home.showScreen('MyMovies');home.children['mainMenu'].view.enable();break;case menuItems.red_carpet:home.showScreen('RedCarpet');home.children['mainMenu'].view.enable();break;case menuItems.all_films:home.showScreen('AllMovies');home.children['mainMenu'].view.enable();break;case menuItems.profile:home.showProfile();home.children['mainMenu'].view.enable();break;case menuItems.search:home.showSearch();home.children['mainMenu'].view.enable();break;}}else if(id==='home_featured'){home.hideSideMenu();}},mainMenuMouseOut:function(e){},createCarouselsList:function(){var params={x:80,y:80,width:1120,height:460};WidgetManager.addWidget(this,'categoriesList','#categories',{},params);var callBacks={clickCB:this.mainMenuClick,keydownCB:this.mainMenuKeydown,hoverCB:this.mainMenuHover,mouseOutCB:this.mainMenuMouseOut};var carouselData=[];var title='';if(Model.Movies.films&&Model.Movies.films.length>0){for(var h=0;h<Model.Movies.films.length;h++){var categoryObj=Model.Movies.films[h];var category=categoryObj.title;var widgetName='home_'+category;var menuItems=language[Model.App.file.language].menu;if(categoryObj.movies&&categoryObj.movies.length>0){carouselData=[];var widgetType=null;switch(category){case'red_carpet':title=menuItems.red_carpet;widgetType='carousel_horizontal_premiere';break;case'upcoming':title=menuItems.upcoming;widgetType='carousel_horizontal_coverart';break;case'now_showing':title=menuItems.now_showing;widgetType='carousel_horizontal_coverart';break;case'featured':widgetType='carousel_horizontal_feature';break;}
for(var i=0;i<categoryObj.movies.length;i++){var film=categoryObj.movies[i];var cloudinary_id='';params={};if(category==='red_carpet'){var background='';for(var j=0;j<film.imagery.banners.length;j++){if(film.imagery.banners[j].platform==='red_carpet'){background=film.imagery.banners[j].url;break;}}
params={background:background,coverart:film.imagery.coverart[0].id,premiere_from:film.premiere_from,premiere_to:film.premiere_to,title:film.title,rating:film.rating,moviedescription:film.small_description};}else if(category==='featured'){var titleImage='';var titlePosition='';if(!Model.App.loggedIn&&i===0){params={image:Model.App.featuredBanners.banner.cloudinary_id,movieTitle:Model.App.featuredBanners.content.title,movieSubTitle:Model.App.featuredBanners.content.sub_title,titlePosition:Model.App.featuredBanners.banner.content_position,btn_text:Model.App.featuredBanners.content.btn_text,type:Model.App.featuredBanners.type};carouselData.push(params);}
for(var k=0;k<film.imagery.banners.length;k++){if(film.imagery.banners[k].platform==='film_title'){titleImage=film.imagery.banners[k].url;}
if(film.imagery.banners[k].platform==='tv_featured'){titlePosition=film.imagery.banners[k].content_position;cloudinary_id=film.imagery.banners[k].url;}}
params={image:cloudinary_id,movieTitle:titleImage,titlePosition:titlePosition};}else{params={image:film.imagery.coverart[0].id,movieTitle:film.title};if(category==='upcoming'){params.date=film.premiere_from;}}
carouselData.push(params);}
this.children['categoriesList'].view.addCarousel(widgetName,callBacks,carouselData,title,widgetType);if(category==='featured'){var w=carouselData.length*16;var l=640-(w/2)-80;$('#category_home_featured').append('<div id="featuredCounter" style="width:'+w+'px;left:'+l+'px"></div>');for(var x=0;x<carouselData.length;x++){if(x===0){$('#featuredCounter').append('<div class="featuredCounterBlock active"></div>');}else{$('#featuredCounter').append('<div class="featuredCounterBlock"></div>');}}}}else{Model.App.errorCode=101;this.publish('Error');}}}
var children=ViewControllerManager.find('categoriesList').children;if(children[Object.keys(children)[0]]){ViewControllerManager.find('categoriesList').activeChild=children[Object.keys(children)[0]].view.name;}},redrawFeaturedCarousel:function(){var carouselData=[];if(Model.Movies.films&&Model.Movies.films.length>0){for(var h=0;h<Model.Movies.films.length;h++){var categoryObj=Model.Movies.films[h];var category=categoryObj.title;var widgetName='home_'+category;if(categoryObj.movies&&categoryObj.movies.length>0&&category==='featured'){carouselData=[];for(var i=0;i<categoryObj.movies.length;i++){var film=categoryObj.movies[i];var cloudinary_id='';var params={};if(category==='featured'){var titleImage='';var titlePosition='';if(!Model.App.loggedIn&&i===0){params={image:Model.App.featuredBanners.banner.cloudinary_id,movieTitle:Model.App.featuredBanners.content.title,movieSubTitle:Model.App.featuredBanners.content.sub_title,titlePosition:Model.App.featuredBanners.banner.content_position,btn_text:Model.App.featuredBanners.content.btn_text,type:Model.App.featuredBanners.type};carouselData.push(params);}
for(var k=0;k<film.imagery.banners.length;k++){if(film.imagery.banners[k].platform==='film_title'){titleImage=film.imagery.banners[k].url;}
if(film.imagery.banners[k].platform==='tv_featured'){titlePosition=film.imagery.banners[k].content_position;cloudinary_id=film.imagery.banners[k].url;}}
params={image:cloudinary_id,movieTitle:titleImage,titlePosition:titlePosition};}
carouselData.push(params);}
var cloneIndex=ViewControllerManager.find('home_featured').cloneIndex;var data={widgetName:widgetName,cloneIndex:cloneIndex,carouselData:carouselData};WidgetManager.carousel_horizontal_feature(data);this.enable();if(category==='featured'){var w=carouselData.length*16;var l=640-(w/2)-80;$('#featuredCounter').html('');$('#featuredCounter').css({width:w+'px',left:l+'px'});for(var x=0;x<carouselData.length;x++){if(x===0){$('#featuredCounter').append('<div class="featuredCounterBlock active"></div>');}else{$('#featuredCounter').append('<div class="featuredCounterBlock"></div>');}}}}}}
$('#categoriesList .CarouselsList_Container').css({top:0});var children=ViewControllerManager.find('categoriesList').children;if(children[Object.keys(children)[0]]){ViewControllerManager.find('categoriesList').activeChild=children[Object.keys(children)[0]].view.name;}},showSideMenu:function(interval){Model.App.showingSideMenu=true;$('#container').removeClass('offScreen');$('#backIcon').hide();$('#featuredCounter').removeClass('active');clearTimeout(this.showingSideMenuTimeout);this.showingSideMenuTimeout=setTimeout(function(){Model.App.showingSideMenu=false;},interval||200);},hideSideMenu:function(){if(!Model.App.showingSideMenu){$('#container').addClass('offScreen');$('#backIcon').show();$('#backIconBackground #backIcon').html(language[Model.App.file.language].common.btn_menu);}},goto:function(id){if(id==='Profile'){this.removeChild('Keyboard');}
if(this.children[id]&&this.children[id].view.activeChild==='myMoviesList'&&(Model.myMovies.films.active_films.length===0&&Model.myMovies.films.past_films.length===0&&Model.myMovies.films.reminders.length===0)){}else{this.hideSideMenu();this.children[id].view.enable();}
if(this.children[this.activeChild].view.activeChild==='home_featured'){$('#featuredCounter').addClass('active');}else{$('#featuredCounter').removeClass('active');}},showScreen:function(category){Util.showSpriteLoader();Model.App.profileState='screen';var menuItems=language[Model.App.file.language].menu;$('#categories').hide();$('#screens').find('> div').hide();var Screen=ViewControllerManager.find('Screen');if(!this.children['Screen']){this.addChild(Screen,'#screens');}else{$('#Screen').show();}
switch(category){case'NowShowing':Screen.setScreen(Model.Movies.films[1].movies,menuItems.now_showing,category);Util.hideSpriteLoader();this.updateHome=true;break;case'ComingSoon':Screen.setScreen(Model.Movies.films[3].movies,menuItems.upcoming,category);Util.hideSpriteLoader();this.updateHome=true;break;case'RedCarpet':var movies=[];for(var i=0;i<Model.Movies.films[2].movies.length;i++){var movie=Model.Movies.films[2].movies[i];var cover='';var background='';for(var j=0;j<movie.imagery.banners.length;j++){if(movie.imagery.banners[j].platform==='red_carpet'){background=movie.imagery.banners[j].url;break;}}
movies.push({coverart:movie.imagery.coverart[0].id,background:background,premiere_from:movie.premiere_from,premiere_to:movie.premiere_to,title:movie.title,rating:movie.rating,moviedescription:movie.small_description});}
Screen.setScreen(movies,menuItems.red_carpet,category);Util.hideSpriteLoader();this.updateHome=true;break;case'MyMovies':Screen.setScreen(Model.Movies.films[3].movies,menuItems.my_movies,category);this.updateHome=true;break;case'AllMovies':Screen.setScreen(Model.Movies.films.all,menuItems.all_films,category);Util.hideSpriteLoader();this.updateHome=true;break;}
this.navigation.mainMenu.Right='Screen';},showProfile:function(){$('#categories').hide();$('#screens').find('> div').hide();if(!this.children['Profile']){var Profile=ViewControllerManager.find('Profile');this.addChild(Profile,'#screens');}else{$('#Profile').show();ViewControllerManager.find('Profile').setup();}
Model.App.profileState='profile';this.navigation.mainMenu.Right='Profile';Util.hideSpriteLoader();},showSearch:function(){var Keyboard=ViewControllerManager.find('Keyboard');var Search=ViewControllerManager.find('Search');$('#categories').hide();$('#screens').find('> div').hide();if(!this.children['Keyboard']){Keyboard.extraInfoController='Search';Keyboard.addChild(Search,'#ExtraInfo');this.addChild(Keyboard,'#screens');}else{$('#MainKeyboard').show();}
this.navigation.mainMenu.Right='Keyboard';},showHome:function(){$('#categories').show();$('#screens').find('> div').hide();this.navigation.mainMenu.Right='categoriesList';Util.hideSpriteLoader();Model.App.profileState='screen';if(this.updateHome){this.updateHome=false;this.redrawFeaturedCarousel();}},back:function(e){var home=ViewControllerManager.find('Home');var root=ViewControllerManager.find("Root");var screen=ViewControllerManager.find('Screen');var Profile=ViewControllerManager.find("Profile");var Keyboard=ViewControllerManager.find("Keyboard");var menuItems=language[Model.App.file.language].menu;var elementId=$('#'+TVA.onFocus).parents($(this))[5].id;$('.gridElement.active').removeClass('active');if(Model.App.profileState==="myMovies"||Model.App.profileState==="screen"||Model.App.profileState==="register"){home.showSideMenu();home.children['mainMenu'].view.enable();e&&e.stopPropagation();}else if(Model.App.profileState==="parental"){ViewControllerManager.find("ParentalControls").unload();this.addChild(Profile,'#screens');}else if(Model.App.profileState==="profile"){home.showSideMenu();home.children['mainMenu'].view.enable();home.navigation.mainMenu.Right='Profile';Model.App.profileState="";}else if(Model.App.profileState==="chooselanguage"){ViewControllerManager.find("ChooseLanguage").unload();Profile.enable();}else if(Model.App.profileState==="help"||Model.App.profileState==="TandC"){if(Model.App.loggedIn){$('#profileInfos').show();}
$('#profileButtons').show();$('.termsSupportScreen').hide();$('#profileTitle').html(menuItems.profile);if(Model.App.profileState==='TandC'){Profile._enableElement("btn_terms_conditions");}else if(Model.App.profileState==='help'){Profile._enableElement("btn_help");}
Model.App.profileState='profile';$('#textField').empty();}else if(Model.App.profileState==="details"){home.removeChild('Details');$('#'+Model.App.returnFromDetailsTo.parent).show();if(Model.App.returnFromDetailsTo.parent==='search_results'){$('#searchResult').show();home.children.Keyboard.view.enable();}else{home._enableElement(Model.App.returnFromDetailsTo.screen);var activeElement=home.children[home.activeChild].view.activeChild;if(Model.App.refreshLibrary&&activeElement==='myMoviesList'){if(Model.App.loggedIn&&Model.App.fromMyMovies){Model.App.refreshLibrary=false;screen.getMyMovies(function(){screen.createMyMoviesList();home._enableElement(Model.App.returnFromDetailsTo.screen);},function(){});}}}}else{var children=root.children;if(children.hasOwnProperty("Modal")){var keyb=children.Modal.view.children;if(keyb.hasOwnProperty("ModalKeyboard")){var controller=Keyboard.extraInfoController;Keyboard.goBack(e,controller);}}}
if(elementId==='mainMenu'){ViewControllerManager.find("Root").exitApp();}},compileAllMovies:function(){var arr=[];Model.App.movieIDMap={};if(Model.Movies.films){for(var i=0;i<Model.Movies.films.length;i++){if(Model.Movies.films[i].movies){if(Model.Movies.films[i].title==='now_showing'||Model.Movies.films[i].title==='upcoming'){arr=arr.concat(arr,Model.Movies.films[i].movies);}
for(var j=0;j<Model.Movies.films[i].movies.length;j++){Model.App.movieIDMap[Model.Movies.films[i].movies[j].flix_id]=Model.Movies.films[i].movies[j].id;}}}
if(arr.length>0){Model.Movies.films['all']=arr;}else{Util.hideSplash();Model.App.errorCode=102;this.publish('Error');}}else{Util.hideSplash();Model.App.errorCode=102;this.publish('Error');}}}));})();