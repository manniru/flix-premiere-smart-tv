(function(){"use strict";var base=ViewControllerManager.findClass("ViewControllerNav");ViewControllerManager.newClassDef("CreditCardMenuVC",Class.create({_extends_:base,_init_:function(args){base.call(this,args);this.activeChild='';this.navigation={'CCMenu_add_card':{Down:"CCMenu_add_online"},'CCMenu_add_online':{Up:"CCMenu_add_card"}};},onLoad:function(){var scope=this;$('#backIcon').text(language[Model.App.file.language].common.btn_back);},render:function(location){this._super(location);if(settings.device==='lg'||settings.device==='webos'){$('#CCMenuContainer').css('background-image','url("./css/assets/background.png")');}
this._enableElement("CCMenu_add_card");this._populateFields();},onKeyDown:function(e,keyCode){TVA.log('keydown in '+this.name);if(Model.App.listen){switch(keyCode){case Keys.getBind("Circle"):case Keys.getBind("Back"):break;case Keys.getBind("Left"):this._navigate("Left",e);e.stopPropagation();break;case Keys.getBind("Right"):this._navigate("Right",e);e.stopPropagation();break;case Keys.getBind("Up"):this._navigate("Up",e);e.stopPropagation();break;case Keys.getBind("Down"):this._navigate("Down",e);e.stopPropagation();break;case Keys.getBind("Cross"):case Keys.getBind("Enter"):$('#'+TVA.onFocus).click();e.stopPropagation();break;}}},onHover:function(event){var element=event.target.id;this._enableElement(element);},goBack:function(e){this.unload();switch(Model.App.profileState){case'details':ViewControllerManager.find('Details').enable();break;case'register':var Profile=ViewControllerManager.find('Profile');var Home=ViewControllerManager.find('Home');Home.addChild(Profile,'#screens');Profile.activeChild="btn_register";TVA.setFocus(Profile.activeChild);break;}
e.stopPropagation();},onUnload:function(){$('#backIcon').text(language[Model.App.file.language].common.btn_menu);this._enableElement("CCMenu_add_card");},creditCardMenuClick:function(){var scope=this;var Keyboard=ViewControllerManager.find('Keyboard');var Home=ViewControllerManager.find('Home');var CreditCardHandler=ViewControllerManager.find('CreditCardHandler');var Profile=ViewControllerManager.find("Profile");if(TVA.onFocus==="CCMenu_add_card"){scope.parentVC.onClose();Model.App.profileState='addCC';this.publish('Keyboard');}else if(TVA.onFocus==="CCMenu_add_online"){var success=function(result){Util.hideSpriteLoader();scope.parentVC.onClose();};var error=function(result){Util.hideSpriteLoader();scope.parentVC.onClose();var Root=ViewControllerManager.find("Root");Root.publish('Information');$('#info_popup_description').html(language[Model.App.file.language].creditCard.err_wrong_credentials);};API.emailAddCard(success,error);Util.showSpriteLoader();}},_populateFields:function(){$('#CCMenu_add_card').text(language[Model.App.file.language].creditCard.btn_addCard);$('#CCMenu_add_online').text(language[Model.App.file.language].creditCard.btn_addOnline);$('#CCMenu_description').html(language[Model.App.file.language].creditCard.menu_description_1+'<br>'+language[Model.App.file.language].creditCard.menu_description_2);}}));})();