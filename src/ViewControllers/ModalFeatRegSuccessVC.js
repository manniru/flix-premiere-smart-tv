(function(){"use strict";var base=ViewControllerManager.findClass("ViewControllerNav");ViewControllerManager.newClassDef("ModalFeatRegSuccessVC",Class.create({_extends_:base,_init_:function(args){base.call(this,args);this.activeChild='btn_exit';this.navigation={};},onUnload:function(){$('#ModalContent').removeClass('moveUp');},onLoad:function(){$('#ModalContent').addClass('moveUp');$('#Header').hide();},render:function(location){this._super(location);this.enable();this.class=$('#Header').attr('class');$('#Header').attr('class','error');var regSuccText=language[Model.App.file.language].registerSuccessScreen;$('#ModalFeatRegSuccess #popup_Title').html(regSuccText.title);$('#ModalFeatRegSuccess #popup_description p:nth-child(1)').html(regSuccText.text);$('#ModalFeatRegSuccess #popup_description p:nth-child(2)').html(regSuccText.sub_text);$('#ModalFeatRegSuccess #btn_exit p').html(regSuccText.btn_text);$('#ModalFeatRegSuccess #back').html(language[Model.App.file.language].common.btn_back);this.activeChild='btn_exit';TVA.setFocus(this.activeChild);Model.App.showFeatRegSuccess=false;Util.hideSpriteLoader();},onKeyDown:function(e,keyCode){$('#ModalFeatRegSuccess #back').removeClass('active');if(!Model.App.Loading){switch(keyCode){case Keys.getBind("Circle"):case Keys.getBind("Back"):this.onClose();break;case Keys.getBind("Up"):e.stopImmediatePropagation();break;case Keys.getBind("Down"):e.stopImmediatePropagation();break;case Keys.getBind("Left"):e.stopImmediatePropagation();break;case Keys.getBind("Right"):e.stopImmediatePropagation();break;case Keys.getBind("Cross"):case Keys.getBind("Enter"):$('#'+TVA.onFocus).click();e.stopImmediatePropagation();break;}}
e.stopPropagation();},_navigate:function(direction,e){var nextChild=this.navigation[this.activeChild][direction];if(nextChild&&this.children[nextChild]){this.children[nextChild].view.enable();e.stopPropagation();}else if($(this.rootID).find('#'+nextChild).length){TVA.setFocus(nextChild);this.activeChild=nextChild;e.stopPropagation();}},onMouseLeave:function(e){$('#'+e.target.id).removeClass('active');e.stopImmediatePropagation();},onBackHover:function(e){$('#'+e.target.id).addClass('active');e.stopImmediatePropagation();},onHover:function(event){},onClose:function(){$(this.rootID+' .active').removeClass('active');$('#Header').attr('class',this.class);this.parentVC.backToPrevious();ViewControllerManager.find("Home").redrawFeaturedCarousel();var home=ViewControllerManager.find('Home');if(home.activeChild==='Details'){home.children[home.activeChild].view.enable();home.children[home.activeChild].view.rebuildView();}},onConfirm:function(){var scope=this;API.getTickets(function(res){Model.App.file.user.ticket_count=res.ticket_count||0;scope.onClose();},function(res,errorCode){Util.hideSpriteLoader();Model.App.errorCode=errorCode;self.publish('Error');});}}));})();