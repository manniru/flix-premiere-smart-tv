(function(){"use strict";var base=ViewControllerManager.findClass("ViewControllerNav");ViewControllerManager.newClassDef("ChooseLanguageVC",Class.create({_extends_:base,_init_:function(args){base.call(this,args);this.navigation={};this.chosenCL='';},onLoad:function(){Model.App.profileState='chooselanguage';$('#backIcon').text(language[Model.App.file.language].common.btn_back);},render:function(location){this._super(location);if(settings.device==='lg'||settings.device==='webos'){$('#ChooseLanguageContainer').css('background-image','url("./css/assets/background.png")');}
this._createLanguageButtons();this.chosenCL='btn_'+Model.App.file.language;$('.checkSignCL').hide();this._defineChosenCL(this.chosenCL);var buttonsDiv=$('#languageButtons');var a=buttonsDiv[0].firstElementChild.id;this._enableElement(a);this._populateFields();},onKeyDown:function(e,keyCode){TVA.log('keydown in choose language');var index=this._discoverButtonsIndex(TVA.onFocus);var buttonsDiv=$('#languageButtons');var length=buttonsDiv[0].children.length;if(Model.App.listen){switch(keyCode){case Keys.getBind("Circle"):case Keys.getBind("Back"):this.goBackCL(e);e.stopPropagation();break;case Keys.getBind("Up"):if(index>0){this._enableElement(buttonsDiv[0].children[index-1].id);}
e.stopPropagation();break;case Keys.getBind("Down"):if(index<length-1){this._enableElement(buttonsDiv[0].children[index+1].id);}
e.stopPropagation();break;case Keys.getBind("Cross"):case Keys.getBind("Enter"):$('#'+TVA.onFocus).click();e.stopImmediatePropagation();break;}}},_discoverButtonsIndex:function(str){var buttonsDiv=$('#languageButtons');var returnValue=0;var length=buttonsDiv[0].children.length;for(var i=0;i<length;i++){if(buttonsDiv[0].children[i].id===str){returnValue=i;}}
return returnValue;},onHover:function(event){var element=event.target.id;this._enableElement(element);},doNothing:function(event){event.stopPropagation();},goBackCL:function(e){this.unload();var Profile=ViewControllerManager.find('Profile');Profile.removeChild('ChooseLanguage');Profile.enable();},onUnload:function(){$('#backIcon').text(language[Model.App.file.language].common.btn_menu);Model.App.profileState='profile';this._enableElement("btn_englishLanguage");$('#languageButtons').empty();},changeCheck:function(event){$('.checkSignCL').hide();var index=this._discoverButtonsIndex(TVA.onFocus);var buttonsDiv=$('#languageButtons');var buttonID=buttonsDiv[0].children[index].id;$('#'+buttonID+'> .checkSignCL').show();this.chosenCL=buttonID;Model.App.file.language=buttonID.substr(4,buttonID.length);event.stopPropagation();},_defineChosenCL:function(id){$('#'+id+'> .checkSignCL').show();},_populateFields:function(){$('#chooseLanguageTitle').text(language[Model.App.file.language].profileScreen.chooseLanguageButton);},_createLanguageButtons:function(){var obj=language;var buttonsContainer=$('#languageButtons');var i=0;for(var prop in obj){var info=obj[prop].languageName;var button=$('<div>');var classes=$('<div class="checkSignCL">');button.attr('id','btn_'+obj[prop].language);button.attr('class','languageButtonsDef');button.text(info);button.append(classes);if(i>0){button.css('margin-top','15px');}
buttonsContainer.append(button);i++;}}}));})();