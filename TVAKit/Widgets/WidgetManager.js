var WidgetManager=(function(){var WidgetManager=function(){this.Widgets={};this.SourceWidgets={};};WidgetManager.prototype={init:function(){for(var i=0;i<WidgetRegister.source.length;i++){var vc=WidgetRegister.source[i];this.create(vc);}
this.cloneIndex=0;this.countdownTimers=[];},create:function(vc){var widgetDef={template:vc.template,events:vc.events,name:vc.name,vcName:vc.vcName,type:vc.type};if(this.Widgets[widgetDef.name])
{TVA.log('Failed to create widget. '+widgetDef.name+' already exists.');}else if(this.SourceWidgets[widgetDef.vcName]){this.Widgets[widgetDef.name]=this.duplicate(widgetDef.type,widgetDef.name,widgetDef.vcName);}else{this.SourceWidgets[widgetDef.vcName]=new Widget({vcName:widgetDef.vcName,template:widgetDef.template,events:widgetDef.events,name:widgetDef.name});}
if(vc.params)
this.Widgets[widgetDef.name]['params']=vc.params;},duplicate:function(sourceVC,newVCName,vcName){if(this.Widgets[newVCName])
{TVA.log('Failed to duplicate widget.'+newVCName+' already exists.');}else if(this.isSourceWidget(vcName)){return new Widget({source:sourceVC,destination:newVCName});}else{TVA.log('Unable to duplicate '+sourceVC+'. Must be a source widget.');}
return null;},find:function(name){if(this.Widgets.hasOwnProperty(name)){return this.Widgets[name];}
return null;},isSourceWidget:function(name){return this.SourceWidgets[name];},delete:function(name){delete this.Widgets[name];},addWidget:function(scope,widgetName,location,callBacks,params){scope[widgetName]=this.find(widgetName);if(!scope.children[widgetName]){scope[widgetName].add(scope,location);this.cloneIndex++;}
if(callBacks){scope[widgetName].setEventCallbacks(callBacks);}
params.cloneIndex=this.cloneIndex;params.widgetName=widgetName;if(params.widgetType){WidgetRegister[params.widgetType]&&WidgetRegister[params.widgetType](params);}else{WidgetRegister[widgetName]&&WidgetRegister[widgetName](params);}},mainMenu:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb='css/assets/'+carouselData[i].icon;var title=carouselData[i].title;var img='url('+thumb+')';var bg="background-image:"+img;content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;width:100%;height:100%"></div><div class="placeholderCategory"></div><p>'+title+'</p><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:0,y:192,width:334,height:720};params.cellWidth=334;params.cellHeight=40;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.horizontalMargin=0;params.cloneIndex=cloneIndex;params.orientation='vertical';params.activate=true;params.performance=true;params.showArrows=false;params.verticalMargin=6;this.find('mainMenu').setParams(params);},categoriesList:function(params){params.gridPos={x:params.x||0,y:params.y||0,width:params.width||100,height:params.height||100};this.find('categoriesList').setParams(params);},myMoviesList:function(params){params.gridPos={x:params.x+20||0,y:params.y||0,width:params.width||100,height:params.height||100};this.find('myMoviesList').setParams(params);},details_media:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb='';if(typeof carouselData[i]==='object'){thumb=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_276,w_414/'+carouselData[i].thumb;}else{thumb=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_276,w_414/'+carouselData[i];}
var title='';var img='url('+thumb+')';var bg="background-image:"+img;content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;"></div><div class="placeholderCategory"></div><p>'+title+'</p><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:25,y:0,width:1100,height:298};params.cellWidth=414;params.cellHeight=276;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.rows=1;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='horizontal';params.activate=false;params.performance=true;params.showArrows=true;this.find('details_media').setParams(params);},details_watch:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb='';var title=carouselData[i];var img='url('+thumb+')';var bg="background-image:"+img;content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;"></div><div class="placeholderCategory"></div><p>'+title+'</p><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:290,y:0,width:689,height:500};params.cellWidth=180;params.cellHeight=60;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.rows=1;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='horizontal';params.activate=false;params.performance=true;params.showArrows=false;this.find('details_watch').setParams(params);var movie=Model.App.movie;var imageID=movie.imagery.coverart[0]?movie.imagery.coverart[0].id:'';var coverArt='<div id="detailsWatchCoverArt" style="background-image:url('+Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_250,w_168/'+imageID+');position:absolute;"></div>';imageID=movie.imagery.banners[1]?movie.imagery.banners[1].url:'';var bg='';var gradient='';var img='';gradient='rgba(0,0,0,1)';img='background:'+gradient;bg+=img+';';gradient='-moz-linear-gradient(top, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 50% , rgba(0,0,0,0.5))';img='background:'+gradient;bg+=img+';';gradient='-webkit-gradient(left top, right top, color-stop(0%, rgba(0,0,0,0)),color-stop(50%, rgba(0,0,0,0)), color-stop(100%, rgba(0,0,0,0.5)))';img='background:'+gradient;bg+=img+';';gradient='-webkit-linear-gradient(top, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 50% , rgba(0,0,0,0.5) 100%)';img='background:'+gradient;bg+=img+';';gradient='-o-linear-gradient(top, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 50% , rgba(0,0,0,0.5) 100%)';img='background:'+gradient;bg+=img+';';gradient='-ms-linear-gradient(top, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 50% , rgba(0,0,0,0.5) 100%)';img='background:'+gradient;bg+=img+';';gradient='linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0) 50% , rgba(0,0,0,0.5)) 100%)';img='background:'+gradient;bg+=img;var background='<div id="detailsWatchBackground" style="background-image:url('+Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_321,w_1280/'+imageID+');position:absolute;"><div style="position:absolute;'+bg+';width:100%;height:100%"></div></div>';var credits={};for(var credit in movie.cast){if(movie.cast[credit].length>0){credits[credit]=[];for(var j=0;j<movie.cast[credit].length;j++){var fieldID=credit.substring(0,credit.length-1);credits[credit].push(movie.cast[credit][j][fieldID+'_title']);}}}
var maxMakers=5;var makerCount=0;var directors='';if(credits.directors){if(makerCount<maxMakers){directors+='<p class="title">'+language[Model.App.file.language].detailsScreen.director+'</p>';for(var i=0;i<credits.directors.length;i++){if(makerCount<maxMakers){directors+='<p>'+credits.directors[i]+'</p>';makerCount++;}}}}
var producers='';if(credits.producers){if(makerCount<maxMakers){producers+='<p class="title">'+language[Model.App.file.language].detailsScreen.producers+'</p>';for(var i=0;i<credits.producers.length;i++){if(makerCount<maxMakers){producers+='<p>'+credits.producers[i]+'</p>';makerCount++;}}}}
var actors='';if(credits.actors){actors+='<p class="title">'+language[Model.App.file.language].detailsScreen.actors+'</p><p>';for(var i=0;i<credits.actors.length;i++){actors+=credits.actors[i];if(i<credits.actors.length-1){actors+=', ';}}
actors+='</p>';}
var writers='';if(credits.writers){if(makerCount<maxMakers){writers+='<p class="title">'+language[Model.App.file.language].detailsScreen.writers+'</p>';for(var i=0;i<credits.writers.length;i++){if(makerCount<maxMakers){writers+='<p>'+credits.writers[i]+'</p>';makerCount++;}}}}
var ratingWhole=Math.floor(movie.rating);var ratingHalf=movie.rating-ratingWhole;var stars='';var wholeStarUrl='assets/full_star.png';var halfStarUrl='assets/half_star.png';var noStarUrl='assets/empty_star.png';for(var j=0;j<5;j++){if(j<ratingWhole){stars+='<div class="star wholeStar"></div>';}else if(ratingHalf>0){ratingHalf=0;stars+='<div class="star halfStar"></div>';}else{stars+='<div class="star noStar"></div>';}}
var releaseDate=Util.isotimedetail(Model.App.movie.release_date);var currTime=new Date();var month='jan';switch(parseInt(releaseDate[1])){case 1:month='jan';break;case 2:month='feb';break;case 3:month='mar';break;case 4:month='apr';break;case 5:month='may';break;case 6:month='jun';break;case 7:month='jul';break;case 8:month='aug';break;case 9:month='sep';break;case 10:month='oct';break;case 11:month='nov';break;case 12:month='dec';break;}
month=Model.App.languages[Model.App.file.language].months[month][1];var releaseDateString='';var d=new Date(Model.App.movie.release_date).getDay();var premDay='';switch(d){case 0:premDay=Model.App.languages[Model.App.file.language].weekdays['sun'][1];break;case 1:premDay=Model.App.languages[Model.App.file.language].weekdays['mon'][1];break;case 2:premDay=Model.App.languages[Model.App.file.language].weekdays['tue'][1];break;case 3:premDay=Model.App.languages[Model.App.file.language].weekdays['wed'][1];break;case 4:premDay=Model.App.languages[Model.App.file.language].weekdays['thu'][1];break;case 5:premDay=Model.App.languages[Model.App.file.language].weekdays['fri'][1];break;case 6:premDay=Model.App.languages[Model.App.file.language].weekdays['sat'][1];break;}
if(parseInt(releaseDate[0])>currTime.getFullYear()){releaseDateString=' | '+premDay+' '+month+' '+releaseDate[2]+', '+releaseDate[0];}else if(parseInt(releaseDate[0])===currTime.getFullYear()){if(parseInt(releaseDate[1])>currTime.getMonth()+1){releaseDateString=' | '+premDay+' '+month+' '+releaseDate[2]+', '+releaseDate[0];}else if(parseInt(releaseDate[1])===currTime.getMonth()+1){if(parseInt(releaseDate[2])>currTime.getDate()){releaseDateString=' | '+premDay+' '+month+' '+releaseDate[2]+', '+releaseDate[0];}}}
var genres='';if(movie.genres&&movie.genres.length>0){for(var i=0;i<movie.genres.length;i++){genres+=movie.genres[i].genre;if(i<movie.genres.length-1){genres+=', ';}}
genres+=' | ';}
var cert=movie.age_rating?movie.age_rating+' | ':'';var info='<div id="movieDetailsInfo">'+cert+genres+movie.duration+releaseDateString+'</div>';var makers='<div id="makers">'+directors+producers+writers+'</div>';var description='<div id="descActors"><p class="description">'+movie.small_description+'</p>'+actors+'</div>';var title='<div id="movieTitleRating">';title+='<div class="movieTitle">'+movie.title;title+='<div class="movieRating">'+stars+'</div></div>';title+=info+'</div>';var watchBackground='<div>'+background+coverArt+title+makers+description+'<div id="successPopup"></div></div>';$('#category_details_watch').prepend(watchBackground);$('#details_watch #Grid'+cloneIndex+'_row_0').css({top:280});},appLanguages:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb='';var title=carouselData[i];var img='url('+thumb+')';var bg="background-image:"+img;content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;"></div><div class="placeholderCategory"></div><p>'+title+'</p><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:290,y:0,width:689,height:550};params.cellWidth=526;params.cellHeight=60;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.rows=1;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='vertical';params.activate=false;params.performance=true;params.showArrows=true;this.find('appLanguages').setParams(params);},searchSuggestions:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var title=carouselData[i];content+=' </div><p>'+title+'</p>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:0,y:0,width:526,height:400};params.cellWidth=496;params.cellHeight=60;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=0;params.rows=carouselData.length;params.horizontalMargin=15;params.cloneIndex=cloneIndex;params.orientation='vertical';params.activate=false;params.performance=true;params.showArrows=true;this.find('searchSuggestions').setParams(params);},ccList:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb='';var title=carouselData[i];var img='url('+thumb+')';var bg="background-image:"+img;var checkActive='';if((!Model.App.file.cardIndex&&i===0)||i===Model.App.file.cardIndex){Model.App.file.cardIndex=i;checkActive=' active';}
content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;"></div><div class="placeholderCategory"></div><p>'+title+'</p><div class="check'+checkActive+'"></div><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:0,y:0,width:689,height:395};params.cellWidth=526;params.cellHeight=60;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='vertical';params.activate=true;params.performance=true;params.showArrows=true;this.find('ccList').setParams(params);},playerLanguages:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb='';var title=carouselData[i];var img='';var bg="background-image:"+img;var w=title.length*16;var selected='';if(i===Model.App.captionsIndex||i===carouselData.length-1){selected='class="selected"';}
content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;"></div><div class="placeholderCategory"></div><p '+selected+' style="position: relative;margin: 9px auto;padding: 8px 33px;background: no-repeat right;width:'+w+'px">'+title+'</p><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:440,y:0,width:400,height:60};params.cellWidth=400;params.cellHeight=60;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.rows=1;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='horizontal';params.activate=true;params.performance=true;params.showArrows=true;this.find('playerLanguages').setParams(params);},media_player_thumbs:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb='';thumb=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_189,w_284/'+carouselData[i];var title='';var img='url('+thumb+')';var bg="background-image:"+img;content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;"></div><div class="placeholderCategory"></div><p>'+title+'</p><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:80,y:0,width:950,height:298};params.cellWidth=284;params.cellHeight=189;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.rows=1;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='horizontal';params.activate=true;params.performance=false;params.showArrows=true;this.find('media_player_thumbs').setParams(params);},search_results:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_275,w_183/'+carouselData[i].imagery.coverart[0].id;var title=carouselData[i].title;var img='url('+thumb+')';var bg="background-image:"+img;content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;background-repeat:no-repeat"></div><div class="placeholderCategory"></div><p class="searchResultTitle">'+title+'</p><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:117,y:140,width:689,height:400};params.cellWidth=183;params.cellHeight=384;params.length=5;params.padding=23;params.x=0;params.y=0;params.columns=5;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='vertical';params.activate=true;params.performance=true;params.showArrows=true;this.find('search_results').setParams(params);},carousel_horizontal_feature:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;var widgetName=params.widgetName;for(var i=0;i<carouselData.length;i++){obj={content:this._addFeatureArtwork(carouselData[i])};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:240,y:0,width:655,height:298};params.cellWidth=650;params.cellHeight=281;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.rows=1;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='horizontal';params.activate=false;params.performance=false;params.loop=true;params.showArrows=true;this.find(widgetName).setParams(params);},_addFeatureArtwork:function(carouselData){var content,thumb,title,obj,img,bg,bgPosition,titleBg;thumb=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_281,w_650/'+carouselData.image;if(carouselData.type==='PROMOTION'){content='';title=carouselData.movieTitle;var subTitle=carouselData.movieSubTitle;var btn=carouselData.btn_text;img='url('+thumb+')';bg="background-image:"+img;bgPosition='left';if(carouselData.titlePosition!==""){bgPosition=carouselData.titlePosition;}
var promoText='<div class="promo"><p style="text-align:'+bgPosition+'">'+title+'</p>';promoText+='<p style="text-align:'+bgPosition+'">'+subTitle+'</p>';if(bgPosition==='center'){promoText+='<p style="text-align:'+bgPosition+';position: relative;padding: 2px 12px;margin: 0px auto;width: 200px;">'+btn+'</p></div>';}else{promoText+='<p style="text-align:'+bgPosition+';position: absolute;padding: 2px 12px;'+bgPosition+': 0px;">'+btn+'</p></div>';}
titleBg="background-image:url("+movieTitleImage+")";content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;background-repeat: no-repeat;"></div><div class="placeholderCategory" style="position: absolute;background-repeat: no-repeat;bottom: 10px;left: 20px;width: 95%;height: 100%;"></div>'+promoText+'<div class="highlight"></div>';}else{content='';var movieTitleImage=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',c_limit,w_300,h_94,q_auto:good/'+carouselData.movieTitle;title='';img='url('+thumb+')';bg="background-image:"+img;bgPosition='left';if(carouselData.titlePosition!==''){bgPosition=carouselData.titlePosition;}
titleBg="background-image:url("+movieTitleImage+")";content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;background-repeat: no-repeat;"></div><div class="placeholderCategory" style="'+titleBg+';position: absolute;background-repeat: no-repeat;bottom: 10px;left: 20px;width: 95%;height: 100%;background-position:'+bgPosition+' bottom;"></div><p>'+title+'</p><div class="highlight"></div>';}
return content},carousel_horizontal_premiere:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;var widgetName=params.widgetName;for(var i=0;i<carouselData.length;i++){var movie=carouselData[i];var content='';var thumb=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_360,w_951/'+movie.background;var coverart=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_311,w_207/'+movie.coverart;var timeArrFrom=Util.isotimedetail(movie.premiere_from);var timeArrTo=Util.isotimedetail(movie.premiere_to);var d=new Date(movie.premiere_from).getDay();var premDay='';switch(d){case 0:premDay=Model.App.languages[Model.App.file.language].weekdays['sun'][0];break;case 1:premDay=Model.App.languages[Model.App.file.language].weekdays['mon'][0];break;case 2:premDay=Model.App.languages[Model.App.file.language].weekdays['tue'][0];break;case 3:premDay=Model.App.languages[Model.App.file.language].weekdays['wed'][0];break;case 4:premDay=Model.App.languages[Model.App.file.language].weekdays['thu'][0];break;case 5:premDay=Model.App.languages[Model.App.file.language].weekdays['fri'][0];break;case 6:premDay=Model.App.languages[Model.App.file.language].weekdays['sat'][0];break;}
var premHour=parseInt(timeArrFrom[3])>12?(parseInt(timeArrFrom[3])-12)+'pm':parseInt(timeArrFrom[3])===0?'midnight':parseInt(timeArrFrom[3])+'am';var premEndHour=parseInt(timeArrTo[3])>12?(parseInt(timeArrTo[3])-12)+'pm':parseInt(timeArrTo[3])===0?'midnight':parseInt(timeArrTo[3])+'am';var desc='<div class="movieDescription">'+movie.moviedescription+'</div>';var showing=language[Model.App.file.language].redCarpetScreen.showing.replace('[day]',premDay).replace('[start]',premHour).replace('[end]',premEndHour);var airingInfo='<div class="airingInfo">'+showing+'</div>';var img='';var bg='';var gradient='';gradient='rgba(0,0,0,1),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-moz-linear-gradient(left, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-webkit-gradient(left top, right top, color-stop(0%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0))),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-webkit-linear-gradient(left, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-o-linear-gradient(left, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-ms-linear-gradient(left, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='linear-gradient(to right, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img;var releaseTime='';if(i===0){releaseTime='<p>'+language[Model.App.file.language].redCarpetScreen.premiering+'</p><p>'+Util.timeRemaining(movie.premiere_from)+'</p>';}
var ratingWhole=Math.floor(movie.rating);var ratingHalf=movie.rating-ratingWhole;var stars='';var wholeStarUrl='assets/full_star.png';var halfStarUrl='assets/half_star.png';var noStarUrl='assets/empty_star.png';for(var j=0;j<5;j++){if(j<ratingWhole){stars+='<div class="star wholeStar"></div>';}else if(ratingHalf>0){ratingHalf=0;stars+='<div class="star halfStar"></div>';}else{stars+='<div class="star noStar"></div>';}}
var countdown='<div class="premieredate">'+releaseTime+'</div>';var rating='<div class="rating">'+stars+'</div>';var title='<div class="movieTitle">'+movie.title+rating+'</div>';var movieDetails=countdown+title+airingInfo+desc;content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;background-size: 207px 311px,100%,100%;background: no-repeat 25px 25px,0,0;"></div><div class="placeholderRedCarpet">'+movieDetails+'</div><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:0,y:0,width:951,height:360};params.cellWidth=935;params.cellHeight=345;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.rows=1;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='horizontal';params.activate=false;params.performance=true;params.showArrows=true;this.find(widgetName).setParams(params);var scope=this;var index=this.countdownTimers.length;Model.App.premiereBoards.home={index:this.countdownTimers.length,cloneIndex:cloneIndex};this.countdownTimers.push(setInterval(function(){for(var i=0;i<1;i++){var movie=carouselData[i];var timeRemaining=Util.timeRemaining(movie.premiere_from);if(timeRemaining==='00:00'){var selector='#home_red_carpet #Grid'+Model.App.premiereBoards.home.cloneIndex+'_row_'+i+'_Item_pos_0 .premieredate p:nth-child(1)';$(selector).html(language[Model.App.file.language].redCarpetScreen.premieringNow);selector='#home_red_carpet #Grid'+Model.App.premiereBoards.home.cloneIndex+'_row_'+i+'_Item_pos_0 .premieredate p:nth-child(2)';$(selector).html('');clearInterval(scope.countdownTimers[Model.App.premiereBoards.home.index]);}else{$('#home_red_carpet #Grid'+Model.App.premiereBoards.home.cloneIndex+'_row_'+i+'_Item_pos_0 .premieredate p:nth-child(1)').html(language[Model.App.file.language].redCarpetScreen.premiering);var selector='#home_red_carpet #Grid'+Model.App.premiereBoards.home.cloneIndex+'_row_'+i+'_Item_pos_0 .premieredate p:nth-child(2)';$(selector).html(timeRemaining);}}},1000));},carousel_vertical_premiere:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var cloneIndex=params.cloneIndex;var widgetName=params.widgetName;for(var i=0;i<carouselData.length;i++){var movie=carouselData[i];var content='';var thumb=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_434,w_1148/'+movie.background;var coverart=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_375,w_250/'+movie.coverart;var desc='<div class="movieDescription">'+movie.small_description+'</div>';var timeArrFrom=Util.isotimedetail(movie.premiere_from);var timeArrTo=Util.isotimedetail(movie.premiere_to);var d=new Date(movie.premiere_from).getDay();var premDay='';switch(d){case 0:premDay=Model.App.languages[Model.App.file.language].weekdays['sun'][0];break;case 1:premDay=Model.App.languages[Model.App.file.language].weekdays['mon'][0];break;case 2:premDay=Model.App.languages[Model.App.file.language].weekdays['tue'][0];break;case 3:premDay=Model.App.languages[Model.App.file.language].weekdays['wed'][0];break;case 4:premDay=Model.App.languages[Model.App.file.language].weekdays['thu'][0];break;case 5:premDay=Model.App.languages[Model.App.file.language].weekdays['fri'][0];break;case 6:premDay=Model.App.languages[Model.App.file.language].weekdays['sat'][0];break;}
var premHour=parseInt(timeArrFrom[3])>12?(parseInt(timeArrFrom[3])-12)+'pm':parseInt(timeArrFrom[3])===0?'midnight':parseInt(timeArrFrom[3])+'am';var premEndHour=parseInt(timeArrTo[3])>12?(parseInt(timeArrTo[3])-12)+'pm':parseInt(timeArrTo[3])===0?'midnight':parseInt(timeArrTo[3])+'am';var desc='<div class="movieDescription">'+movie.moviedescription+'</div>';var showing=language[Model.App.file.language].redCarpetScreen.showing.replace('[day]',premDay).replace('[start]',premHour).replace('[end]',premEndHour);var airingInfo='<div class="airingInfo">'+showing+'</div>';var bg='';var gradient='';var img='';gradient='rgba(0,0,0,1),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-moz-linear-gradient(left, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-webkit-gradient(left top, right top, color-stop(0%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0))),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-webkit-linear-gradient(left, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-o-linear-gradient(left, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='-ms-linear-gradient(left, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img+';';gradient='linear-gradient(to right, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%),';img='background:url('+coverart+'),'+gradient+'url('+thumb+')';bg+=img;var releaseTime='';if(i===0){releaseTime='<p>'+language[Model.App.file.language].redCarpetScreen.premiering+'</p><p>'+Util.timeRemaining(movie.premiere_from)+'</p>';}
var ratingWhole=Math.floor(movie.rating);var ratingHalf=movie.rating-ratingWhole;var stars='';var wholeStarUrl='assets/full_star.png';var halfStarUrl='assets/half_star.png';var noStarUrl='assets/empty_star.png';for(var j=0;j<5;j++){if(j<ratingWhole){stars+='<div class="star wholeStar"></div>';}else if(ratingHalf>0){ratingHalf=0;stars+='<div class="star halfStar"></div>';}else{stars+='<div class="star noStar"></div>';}}
var countdown='<div class="premieredate">'+releaseTime+'</div>';var rating='<div class="rating">'+stars+'</div>';var title='<div class="movieTitle">'+movie.title+rating+'</div>';var movieDetails=countdown+title+airingInfo+desc;content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;background-size: 250px 375px,100%,100%;background: no-repeat 25px 30px,0px,0px;"></div><div class="placeholderRedCarpet">'+movieDetails+'</div><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:95,y:130,width:1140,height:460};params.cellWidth=1122;params.cellHeight=440;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.horizontalMargin=50;params.cloneIndex=cloneIndex;params.orientation='vertical';params.activate=false;params.performance=true;params.showArrows=true;params.verticalMargin=30;this.find(widgetName).setParams(params);var scope=this;var index=this.countdownTimers.length;Model.App.premiereBoards.screen={index:this.countdownTimers.length,cloneIndex:cloneIndex};this.countdownTimers.push(setInterval(function(){for(var i=0;i<1;i++){var movie=carouselData[i];var timeRemaining=Util.timeRemaining(movie.premiere_from);if(timeRemaining==='00:00'){var selector='#red_carpet_screen #Grid'+Model.App.premiereBoards.screen.cloneIndex+'_row_'+i+'_Item_pos_0 .premieredate p:nth-child(1)';$(selector).html(language[Model.App.file.language].redCarpetScreen.premieringNow);selector='#red_carpet_screen #Grid'+Model.App.premiereBoards.screen.cloneIndex+'_row_'+i+'_Item_pos_0 .premieredate p:nth-child(2)';$(selector).html('');clearInterval(scope.countdownTimers[Model.App.premiereBoards.screen.index]);}else{$('#red_carpet_screen #Grid'+Model.App.premiereBoards.screen.cloneIndex+'_row_'+i+'_Item_pos_0 .premieredate p:nth-child(1)').html(language[Model.App.file.language].redCarpetScreen.premiering);var selector='#red_carpet_screen #Grid'+Model.App.premiereBoards.screen.cloneIndex+'_row_'+i+'_Item_pos_0 .premieredate p:nth-child(2)';$(selector).html(timeRemaining);}}},1000));},grid_vertical_coverart:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var widgetName=params.widgetName;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_275,w_183/'+carouselData[i].imagery.coverart[0].id;var title=carouselData[i].title;var img='url('+thumb+')';var bg="background-image:"+img;var date='';if(carouselData[i].date){var releaseDate=Util.isotimedetail(carouselData[i].date);var month='jan';switch(parseInt(releaseDate[1])){case 1:month='jan';break;case 2:month='feb';break;case 3:month='mar';break;case 4:month='apr';break;case 5:month='may';break;case 6:month='jun';break;case 7:month='jul';break;case 8:month='aug';break;case 9:month='sep';break;case 10:month='oct';break;case 11:month='nov';break;case 12:month='dec';break;}
month=Model.App.languages[Model.App.file.language].months[month][0];date='<div class="comingSoonDate">'+month+' '+parseInt(releaseDate[2])+', '+parseInt(releaseDate[0])+'</div>';}
content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;background-repeat:no-repeat"></div><div class="placeholderCategory"></div><div class="movieTitleContainer"><p>'+title+'</p></div>'+date+'<div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:100,y:110,width:1100,height:400};params.cellWidth=183;params.cellHeight=400;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=5;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='vertical';params.activate=false;params.performance=true;params.showArrows=true;this.find(widgetName).setParams(params);},carousel_horizontal_coverart:function(params){var data={};data['contents']=[];var carouselData=params.carouselData;var widgetName=params.widgetName;var cloneIndex=params.cloneIndex;for(var i=0;i<carouselData.length;i++){var content='';var thumb=Model.App.file.locale.app_config.cloudinary_base_url+config.cloudinarySettings+',h_275,w_183/'+carouselData[i].image;var title=carouselData[i].movieTitle;var img='url('+thumb+')';var bg="background-image:"+img;var date='';if(carouselData[i].date){var releaseDate=Util.isotimedetail(carouselData[i].date);var month='jan';switch(parseInt(releaseDate[1])){case 1:month='jan';break;case 2:month='feb';break;case 3:month='mar';break;case 4:month='apr';break;case 5:month='may';break;case 6:month='jun';break;case 7:month='jul';break;case 8:month='aug';break;case 9:month='sep';break;case 10:month='oct';break;case 11:month='nov';break;case 12:month='dec';break;}
month=Model.App.languages[Model.App.file.language].months[month][0];}
content+=' <div class="placeholder"></div><div class="thmb" style="'+bg+';position:absolute;background-repeat: no-repeat;"></div><div class="placeholderCategory"></div><div class="movieTitleContainer"><p class="coverartMovieTitle">'+title+'</p><p>'+date+'</p></div><div class="highlight"></div>';var obj={content:content};data.contents[i]=obj;}
var params={};params=data;params.gridPos={x:3,y:0,width:1100,height:298};params.cellWidth=183;params.cellHeight=275;params.length=3;params.padding=0;params.x=0;params.y=0;params.columns=1;params.rows=1;params.horizontalMargin=30;params.cloneIndex=cloneIndex;params.orientation='horizontal';params.activate=false;params.performance=true;params.showArrows=true;this.find(widgetName).setParams(params);}};return new WidgetManager();})();